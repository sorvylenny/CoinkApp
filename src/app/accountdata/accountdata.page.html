
<app-toolbar
[currentStep]="currentNumber"
(nextPage)="nextSubmit()"
></app-toolbar>

<ion-content [fullscreen]="true" class="ion-padding">

  <ion-card-content class="ion-align-self-center">
    <ion-grid>
      <ion-row>
        <ion-col size="3">
          <div class="img-container">
            <ion-img src="assets/image/Oink-M.svg" alt="icon"></ion-img>
          </div>
        </ion-col>
        <ion-col size="9">
              <ion-item lines="none">
                <ion-label class="data-card-title data-title">¿CUÁLES SON TUS DATOS?</ion-label>
              </ion-item>
              <ion-item lines="none">
                <ion-label class="data-card-subtitle dataTitle">Ahora necesitamos saber algunos datos tuyos.</ion-label>
              </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card-content>
  <mat-divider class="line"></mat-divider>

  <ion-content collapse="condense" class="ion-padding">
    <ion-toolbar>
    <span class="title">Documento de identidad</span>
    <hr>
      <form [formGroup]="dataccount" (ngSubmit)="nextSubmit()">
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Tipo de Documento</mat-label>
          <mat-select formControlName="tipoDocumento">
            <mat-option *ngFor="let docType of typeDocument" [value]="docType.id">
              {{ docType.description }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="dataccount.get('tipoDocumento')?.invalid && dataccount.get('tipoDocumento')?.touched">
            El tipo del documento es obligatorio.
           </mat-error>
        </mat-form-field>
        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Número de documento</mat-label>
          <input type="text" matInput formControlName="numeroDocumento" placeholder="1234567890" min="0">
          <!-- Primer mat-error para validar la longitud del número de documento -->
          <mat-error *ngIf="dataccount.get('numeroDocumento')?.errors?.['maxlength']">
            El número de documento debe tener 10 dígitos.
          </mat-error>
          <!-- Segundo mat-error para validar si el campo es obligatorio -->
          <mat-error *ngIf="dataccount.get('numeroDocumento')?.errors?.['required'] && dataccount.get('numeroDocumento')?.touched">
            El número de documento es obligatorio.
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Fecha de expedición del documento</mat-label>
          <input matInput [matDatepicker]="picker" formControlName="fechaExpedicion" placeholder="Seleccione una fecha">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="dataccount.get('fechaExpedicion')?.invalid && (dataccount.get('fechaExpedicion')?.dirty || dataccount.get('fechaExpedicion')?.touched)">
            La fecha de expedición del documento es obligatoria.
          </mat-error>
        </mat-form-field>

        <mat-form-field class="full-width" appearance="fill">
          <mat-label>Fecha de nacimiento</mat-label>
          <input matInput [matDatepicker]="picker1" formControlName="fechaNacimiento" placeholder="Seleccione una fecha">
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
          <mat-error *ngIf="dataccount.get('fechaNacimiento')?.invalid && (dataccount.get('fechaNacimiento')?.dirty || dataccount.get('fechaNacimiento')?.touched)">
            La fecha de nacimiento es obligatoria.
          </mat-error>
      </mat-form-field>
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>Género</mat-label>
        <mat-select formControlName="genero" placeholder="Seleccione su género">
          <mat-option *ngFor="let genero of generos" [value]="genero">{{ genero }}</mat-option>
        </mat-select>
        <mat-error *ngIf="dataccount.get('genero')?.invalid && dataccount.get('genero')?.touched">
          El género es obligatorio.
        </mat-error>
      </mat-form-field>


      <mat-divider></mat-divider>
      <hr>
        <span class="title">Configura tu cuenta</span>
        <hr>
      <mat-form-field class="full-width">
        <mat-label>Correo electronico</mat-label>
        <input matInput formControlName="correoElectronico" placeholder="">
        <mat-error *ngIf="dataccount.get('correoElectronico')?.invalid && dataccount.get('correoElectronico')?.touched">
         El correo electronico es obligatorio.
        </mat-error>
      </mat-form-field>
      <mat-form-field class="full-width">
        <mat-label>Confirmar correo electronico</mat-label>
        <input matInput formControlName="confirmarCorreo" placeholder="">
        <mat-icon *ngIf="dataccount.get('confirmarCorreo')?.valid" style="color: #1EEA00;"  matSuffix >check</mat-icon>
        <mat-error *ngIf="dataccount.get('confirmarCorreo')?.invalid && dataccount.get('confirmarCorreo')?.touched">
          Los correo deben ser iguales.
        </mat-error>

      </mat-form-field>
      <mat-form-field class="full-width">
        <mat-label>Pin de seguridad</mat-label>
        <input [type]="hidePassword ? 'password' : 'text'" matInput formControlName="password" autocomplete="off">
        <button mat-icon-button matSuffix (click)="togglePasswordVisibility()" type="button">
          <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="dataccount.get('password')?.invalid && dataccount.get('password')?.touched">
          El PIN debe ser de 4 dígitos.
         </mat-error>
      </mat-form-field>
      <mat-form-field class="full-width">
        <mat-label>Confirmar PIN de seguridad</mat-label>
        <input [type]="hidePasswordconf ? 'password' : 'text'" matInput formControlName="confirmarPassword" autocomplete="off">
        <button mat-icon-button matSuffix (click)="passwordVisibility()" type="button">
          <mat-icon>{{ hidePasswordconf ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        <mat-error *ngIf="dataccount.get('confirmarPassword')?.invalid">
          Este campo no coincide con el PIN
        </mat-error>
      </mat-form-field>
        <div class="button-submit">
          <button mat-button class="full-width custom-button" type="submit" [disabled]="!dataccount.valid"> <ng-container *ngIf="!loading">Siguiente</ng-container>
            <ion-spinner *ngIf="loading" name="dots"></ion-spinner></button>
        </div>
      </form>
    </ion-toolbar>
  </ion-content>
</ion-content>
